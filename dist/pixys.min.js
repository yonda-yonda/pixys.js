"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var Pixys=function(){function l(e){var t=this,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,l);this.options=Object.assign({},{headers:{},crossOrigin:"anonymous"},a),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.loaded=!1;function n(e){t.canvas.width=e.width,t.canvas.height=e.height,t.context.drawImage(e,0,0),t.loaded=!0}if("string"==typeof e){var s=new Image,o=new XMLHttpRequest;o.onreadystatechange=function(){4==o.readyState&&200==o.status&&(s.src=URL.createObjectURL(o.response),s.crossOrigin=t.options.crossOrigin,s.onload=function(){n(s)})},o.open("GET",e),o.responseType="blob";for(var i=0,r=Object.keys(this.options.headers);i<r.length;i++){var c=r[i];o.setRequestHeader(c,this.options.headers[c])}o.send(null)}else e instanceof HTMLElement&&"img"===e.tagName.toLocaleLowerCase()&&(console.log(e),n(e));this.options.parent instanceof HTMLElement?this.options.parent.appendChild(this.canvas):"string"==typeof this.options.parent&&document.getElementById(this.options.parent).appendChild(this.canvas)}return _createClass(l,[{key:"getValue",value:function(e,t){return this.context.getImageData(e,t,1,1).data}},{key:"setValue",value:function(e,t,a){var n=2<arguments.length&&void 0!==a?a:{};console.log(this);var s=this.context.getImageData(e,t,1,1);n.hasOwnProperty("r")&&(s.data[0]=n.r),n.hasOwnProperty("g")&&(s.data[1]=n.g),n.hasOwnProperty("b")&&(s.data[2]=n.b),n.hasOwnProperty("a")&&(s.data[3]=n.a),this.context.putImageData(s,e,t)}},{key:"setPicker",value:function(s){function t(e){var t=e.layerX,a=e.layerY,n=o.getValue(t,a);s(t,a,n)}var o=this;this.canvas.addEventListener("touchstart",function(e){e.preventDefault(),t(e)}),this.canvas.addEventListener("click",t)}}]),l}();